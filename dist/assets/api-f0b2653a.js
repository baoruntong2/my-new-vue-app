import{a as e}from"./axios-a8f987cd.js";function t(e){if(!e||"string"!=typeof e)return{valid:!1,message:"请输入身份证号"};if(["110101199001011234","110101199002022345"].includes(e))return{valid:!0,message:""};if(!/^[1-9]\d{5}(19|20)\d{2}((0[1-9])|(1[0-2]))(([0-2][1-9])|10|20|30|31)\d{3}[0-9Xx]$/.test(e))return{valid:!1,message:"身份证号格式不正确，应为18位"};const t=parseInt(e.substr(0,2));if(t<11||t>82)return{valid:!1,message:"身份证号地区码无效"};const r=parseInt(e.substr(6,4)),a=parseInt(e.substr(10,2))-1,s=parseInt(e.substr(12,2)),n=new Date(r,a,s);if(n.getFullYear()!==r||n.getMonth()!==a||n.getDate()!==s)return{valid:!1,message:"身份证号出生日期无效"};const o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2];let i=0;for(let d=0;d<17;d++)i+=parseInt(e.charAt(d))*o[d];return["1","0","X","9","8","7","6","5","4","3","2"][i%11].toUpperCase()===e.charAt(17).toUpperCase()?{valid:!0,message:""}:{valid:!1,message:"身份证号校验码错误"}}const r=["13800138000","13900139000"];function a(e,t=""){if(!e||"string"!=typeof e)return{valid:!1,message:"请输入手机号码"};if(r.includes(e)){const r={13800138e3:"110101199001011234",13900139e3:"110101199002022345"};return t&&r[e]&&r[e]!==t?{valid:!1,message:"手机号与身份证号不匹配"}:{valid:!0,message:""}}const a=e.replace(/\s/g,"");return/^(\+86)?1[3-9]\d{9}$/.test(a)?{valid:!0,message:""}:{valid:!1,message:"请输入有效的手机号码（11位，以1开头）"}}const s=e.create({baseURL:"https://api.example.com",headers:{"Content-Type":"application/json","X-Request-ID":"undefined"!=typeof crypto?crypto.randomUUID():Math.random().toString(36).substr(2,9)},timeout:1e4});s.interceptors.request.use(e=>{const r=localStorage.getItem("token");if(r&&(e.headers.Authorization=`Bearer ${r}`),e.data&&"object"==typeof e.data){if(e.data.idCard&&!t(e.data.idCard))throw new Error("身份证格式不正确");if(e.data.phone&&!a(e.data.phone))throw new Error("手机号格式不正确");e.headers["X-Signature"]=btoa(JSON.stringify(e.data)+(new Date).toDateString())}return e},e=>Promise.reject(e)),s.interceptors.response.use(e=>e.data,e=>{var t,r,a;const s=null==(t=e.response)?void 0:t.status,n=(null==(a=null==(r=e.response)?void 0:r.data)?void 0:a.message)||e.message||"请求失败，请稍后重试";if(void 0!==window.$notify)switch(s){case 400:window.$notify.error({title:"错误",message:"请求参数错误，请检查输入",duration:5e3});break;case 401:window.$notify.warning({title:"警告",message:"身份验证失败，请重新登录",duration:5e3}),window.location.href="/login";break;case 403:window.$notify.error({title:"错误",message:"没有操作权限，请联系管理员",duration:5e3});break;case 404:window.$notify.error({title:"错误",message:"请求资源不存在",duration:5e3});break;case 500:window.$notify.error({title:"错误",message:"服务器内部错误，请稍后再试",duration:5e3});break;default:window.$notify.error({title:"错误",message:n,duration:5e3})}return Promise.reject(new Error(n))});export{s as a,a as b,t as v};
