var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s,l=(e,l)=>{for(var n in l||(l={}))t.call(l,n)&&r(e,n,l[n]);if(a)for(var n of a(l))s.call(l,n)&&r(e,n,l[n]);return e},n=(e,a,t)=>new Promise((s,r)=>{var l=e=>{try{o(t.next(e))}catch(a){r(a)}},n=e=>{try{o(t.throw(e))}catch(a){r(a)}},o=e=>e.done?s(e.value):Promise.resolve(e.value).then(l,n);o((t=t.apply(e,a)).next())});import{u as o}from"./accountStore-88a5190b.js";import{_ as i}from"./index-6eedd0a1.js";import{r as d,a as c,f as u,b as p,c as m,l as v,t as y,e as g,w as x,F as f,z as b,I as h,C as w,E as k,G as R,j as C,n as _,u as j,m as I}from"./vue-vendor-4f5e579f.js";const T={class:"account-info-container bg-white rounded-lg shadow-md p-6 mb-6"},O={class:"flex items-center justify-between mb-6"},F={class:"text-2xl font-bold text-gray-800"},U={class:"text-gray-600"},z={class:"flex items-center space-x-4"},M={class:"account-types"},V={class:"flex flex-wrap gap-3"},A={class:"font-medium mr-2"},N={class:"text-gray-500 text-sm"},P=i({__name:"AccountInfo",setup(e){const a=o(),t=d({});return c(()=>n(this,null,function*(){yield a.fetchUserInfo(),t.value=a.userInfo})),(e,s)=>{const r=u("router-link");return p(),m("div",T,[v("div",O,[v("div",null,[v("h2",F,y(t.value.name),1),v("p",U,"持有 "+y(t.value.accountCount)+" 个账户",1)]),v("div",z,[s[2]||(s[2]=v("button",{class:"text-primary hover:text-primary/80 transition-colors"},[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})])],-1)),s[3]||(s[3]=v("button",{class:"bg-primary hover:bg-primary/90 text-white px-4 py-2 rounded-md transition-colors"}," 编辑资料 ",-1)),g(r,{to:"/noncash/loan-services",class:"bg-success hover:bg-success/90 text-white px-4 py-2 rounded-md transition-colors flex items-center space-x-2",onClick:s[0]||(s[0]=e=>{a.setNavigationState({from:"accountInfo",to:"贷款服务",timestamp:Date.now()})})},{default:x(()=>[...s[1]||(s[1]=[v("span",null,"办理业务",-1),v("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 8l4 4m0 0l-4 4m4-4H3"})],-1)])]),_:1})])]),v("div",M,[s[4]||(s[4]=v("h3",{class:"text-lg font-semibold mb-3 text-gray-700"},"账户类型",-1)),v("div",V,[(p(!0),m(f,null,b(t.value.accounts,e=>(p(),m("div",{key:e.id,class:"bg-gray-50 border border-gray-200 rounded-md px-4 py-2 flex items-center"},[v("span",A,y(e.type),1),v("span",N,y(e.number),1)]))),128))])])])}}},[["__scopeId","data-v-3cf8ca82"]]),D={class:"transaction-filters bg-white p-4 border-b border-gray-200 shadow-sm sticky top-0 z-10"},S={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},q={class:"filter-group"},B={class:"flex items-center space-x-2"},E={class:"filter-group"},L=["value"],H={class:"filter-group"},G={class:"flex items-center space-x-2"},Y={class:"filter-group"},J={class:"flex items-center space-x-2"},K=["value"],Q=i({__name:"TransactionFilters",props:{transactionTypes:{type:Array,required:!0},statusOptions:{type:Array,required:!0},filters:{type:Object,required:!0}},emits:["update-filters","clear-filters"],setup(e,{emit:a}){const t=e,s=a,r=d({dateRange:[],transactionType:"",amountRange:[],status:""});h(()=>t.filters,e=>{r.value=l({},e)},{immediate:!0,deep:!0});const n=(e,a)=>{r.value[e]=a,s("update-filters",l({},r.value))},o=()=>{r.value={dateRange:[],transactionType:"",amountRange:[],status:""},s("clear-filters")};return(a,t)=>(p(),m("div",D,[v("div",S,[v("div",q,[t[13]||(t[13]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"时间范围",-1)),v("div",B,[w(v("input",{type:"date","onUpdate:modelValue":t[0]||(t[0]=e=>r.value.dateRange[0]=e),class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary/20",onChange:t[1]||(t[1]=e=>n("dateRange",[r.value.dateRange[0],r.value.dateRange[1]]))},null,544),[[k,r.value.dateRange[0]]]),t[12]||(t[12]=v("span",{class:"text-gray-500"},"至",-1)),w(v("input",{type:"date","onUpdate:modelValue":t[2]||(t[2]=e=>r.value.dateRange[1]=e),class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary/20",onChange:t[3]||(t[3]=e=>n("dateRange",[r.value.dateRange[0],r.value.dateRange[1]]))},null,544),[[k,r.value.dateRange[1]]])])]),v("div",E,[t[15]||(t[15]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"交易类型",-1)),w(v("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>r.value.transactionType=e),class:"w-full rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary/20",onChange:t[5]||(t[5]=e=>n("transactionType",e.target.value))},[t[14]||(t[14]=v("option",{value:""},"全部类型",-1)),(p(!0),m(f,null,b(e.transactionTypes,e=>(p(),m("option",{key:e,value:e},y(e),9,L))),128))],544),[[R,r.value.transactionType]])]),v("div",H,[t[17]||(t[17]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"金额范围",-1)),v("div",G,[w(v("input",{type:"number","onUpdate:modelValue":t[6]||(t[6]=e=>r.value.amountRange[0]=e),placeholder:"最小金额",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary/20",onChange:t[7]||(t[7]=e=>n("amountRange",[r.value.amountRange[0],r.value.amountRange[1]]))},null,544),[[k,r.value.amountRange[0]]]),t[16]||(t[16]=v("span",{class:"text-gray-500"},"至",-1)),w(v("input",{type:"number","onUpdate:modelValue":t[8]||(t[8]=e=>r.value.amountRange[1]=e),placeholder:"最大金额",class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary/20",onChange:t[9]||(t[9]=e=>n("amountRange",[r.value.amountRange[0],r.value.amountRange[1]]))},null,544),[[k,r.value.amountRange[1]]])])]),v("div",Y,[t[20]||(t[20]=v("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"交易状态",-1)),v("div",J,[w(v("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>r.value.status=e),class:"flex-1 rounded-md border-gray-300 shadow-sm focus:border-primary focus:ring focus:ring-primary/20",onChange:t[11]||(t[11]=e=>n("status",e.target.value))},[t[18]||(t[18]=v("option",{value:""},"全部状态",-1)),(p(!0),m(f,null,b(e.statusOptions,e=>(p(),m("option",{key:e,value:e},y(e),9,K))),128))],544),[[R,r.value.status]]),v("button",{onClick:o,class:"text-sm text-gray-500 hover:text-gray-700"},[...t[19]||(t[19]=[v("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[v("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])])])])]))}},[["__scopeId","data-v-92a93798"]]),W={class:"account-tabs-container flex h-full bg-gray-50 rounded-lg overflow-hidden border border-gray-200"},X={class:"w-56 border-r border-gray-200 bg-white flex flex-col"},Z={class:"flex-1 overflow-y-auto"},$={class:"px-3 py-2 text-xs font-medium text-gray-500 uppercase tracking-wider"},ee={class:"px-1"},ae=["onClick"],te={class:"font-medium"},se={class:"text-xs text-gray-500 mt-0.5"},re={class:"text-right"},le={class:"font-semibold"},ne={class:"flex-1 flex flex-col overflow-hidden"},oe={class:"p-4 border-b border-gray-200 bg-white"},ie={class:"flex items-center justify-between mb-2"},de={class:"text-xl font-semibold text-gray-800"},ce={class:"text-2xl font-bold text-primary"},ue={class:"text-sm text-gray-500"},pe={class:"flex-1 overflow-y-auto p-4"},me={key:0,class:"flex justify-center items-center h-40"},ve={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-4"},ye={key:2,class:"text-center py-10 text-gray-500"},ge={key:3,class:"space-y-3"},xe={class:"col-span-3 text-sm"},fe={class:"col-span-3 text-sm"},be={class:"font-medium"},he={class:"text-xs text-gray-500"},we={class:"col-span-2 text-sm"},ke={class:"px-2 py-1 bg-gray-100 rounded-full text-xs"},Re={class:"col-span-2 text-sm"},Ce=i({__name:"AccountTabs",setup(e){const a=o(),t=C(()=>a.currentAccount),s=C(()=>a.filteredTransactions),r=C(()=>a.searchFilters),l=C(()=>a.accountTypes),n=C(()=>a.transactionTypes),i=C(()=>a.statusOptions),d=C(()=>a.isLoading),c=C(()=>a.error),u=e=>{a.selectAccount(e)},x=e=>{a.updateFilters(e)},w=()=>{a.clearFilters()},k=e=>e?new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY",minimumFractionDigits:2}).format(e):"¥0.00";return h(()=>a.userInfo.accounts.length,e=>{e>0&&!t.value&&u(a.userInfo.accounts[0].id)},{immediate:!0}),(e,a)=>{var o,h,R;return p(),m("div",W,[v("div",X,[a[0]||(a[0]=v("div",{class:"p-3 border-b border-gray-200"},[v("h3",{class:"font-semibold text-gray-800"},"账户列表")],-1)),v("div",Z,[(p(!0),m(f,null,b(l.value,e=>(p(),m("div",{key:e.type,class:"mb-4"},[v("div",$,y(e.type),1),v("div",ee,[(p(!0),m(f,null,b(e.accounts,e=>{var a;return p(),m("button",{key:e.id,onClick:a=>u(e.id),class:_(["w-full text-left px-3 py-3 rounded-md transition-colors flex items-center justify-between",(null==(a=t.value)?void 0:a.id)===e.id?"bg-primary/10 text-primary border-l-4 border-primary":"hover:bg-gray-50 text-gray-700"])},[v("div",null,[v("div",te,y(e.name),1),v("div",se,y(e.number),1)]),v("div",re,[v("div",le,y(k(e.balance)),1)])],10,ae)}),128))])]))),128))])]),v("div",ne,[v("div",oe,[v("div",ie,[v("h3",de,y(null==(o=t.value)?void 0:o.name),1),v("div",ce,y(k((null==(h=t.value)?void 0:h.balance)||0)),1)]),v("div",ue,y(null==(R=t.value)?void 0:R.number),1)]),g(Q,{"transaction-types":n.value,"status-options":i.value,filters:r.value,onUpdateFilters:x,onClearFilters:w},null,8,["transaction-types","status-options","filters"]),v("div",pe,[d.value?(p(),m("div",me,[...a[1]||(a[1]=[v("div",{class:"flex flex-col items-center"},[v("div",{class:"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin mb-3"}),v("p",{class:"text-gray-600"},"加载交易记录中...")],-1)])])):c.value?(p(),m("div",ve,y(c.value),1)):0===s.value.length?(p(),m("div",ye," 没有找到符合条件的交易记录 ")):(p(),m("div",ge,[a[2]||(a[2]=j('<div class="grid grid-cols-12 text-xs font-semibold text-gray-500 uppercase tracking-wider pb-2 border-b border-gray-200" data-v-a129ae04><div class="col-span-3" data-v-a129ae04>日期</div><div class="col-span-3" data-v-a129ae04>描述</div><div class="col-span-2" data-v-a129ae04>类型</div><div class="col-span-2" data-v-a129ae04>状态</div><div class="col-span-2 text-right" data-v-a129ae04>金额</div></div>',1)),(p(!0),m(f,null,b(s.value,e=>{return p(),m("div",{key:e.id,class:"grid grid-cols-12 items-center py-3 px-2 rounded-md hover:bg-gray-50 transition-colors"},[v("div",xe,y((t=e.date,new Date(t).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"}))),1),v("div",fe,[v("div",be,y(e.description),1),v("div",he,y(e.merchant),1)]),v("div",we,[v("span",ke,y(e.type),1)]),v("div",Re,[v("span",{class:_((a=e.status,{"成功":"text-green-600 bg-green-50 px-2 py-1 rounded-full text-xs","处理中":"text-yellow-600 bg-yellow-50 px-2 py-1 rounded-full text-xs","失败":"text-red-600 bg-red-50 px-2 py-1 rounded-full text-xs"}[a]||"text-gray-600 bg-gray-50 px-2 py-1 rounded-full text-xs"))},y(e.status),3)]),v("div",{class:_(["col-span-2 text-right font-medium",e.amount>0?"text-green-600":"text-red-600"])},y(e.amount>0?"+":"")+y(k(e.amount)),3)]);var a,t}),128))]))])])])}}},[["__scopeId","data-v-a129ae04"]]),_e={class:"min-h-screen bg-gray-50 flex flex-col"},je={class:"flex-1 container mx-auto px-4 py-8"},Ie={key:0,class:"flex flex-col items-center justify-center h-64"},Te={key:1,class:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md mb-6"},Oe={key:2,class:"space-y-6"},Fe=i({__name:"HomeView",setup(e){const a=o(),t=d(!0),s=d(null),r=()=>n(this,null,function*(){t.value=!0,s.value=null,yield l()}),l=()=>n(this,null,function*(){try{yield a.fetchUserInfo(),a.clearError()}catch(e){s.value=a.error||"加载账户信息失败，请稍后重试"}finally{t.value=!1}});return c(()=>n(this,null,function*(){yield l()})),(e,a)=>(p(),m("div",_e,[v("main",je,[t.value?(p(),m("div",Ie,[...a[0]||(a[0]=[v("div",{class:"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"},null,-1),v("p",{class:"text-gray-600"},"加载账户信息中...",-1)])])):I("",!0),s.value?(p(),m("div",Te,[v("p",null,y(s.value),1),v("button",{onClick:r,class:"text-sm font-medium text-red-800 hover:underline mt-1"},"重试")])):(p(),m("div",Oe,[g(P),g(Ce)]))])]))}},[["__scopeId","data-v-292c8749"]]);export{Fe as default};
