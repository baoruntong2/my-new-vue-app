var t=Object.defineProperty,e=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(e,a,n)=>a in e?t(e,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[a]=n,s=(t,s)=>{for(var o in s||(s={}))a.call(s,o)&&r(t,o,s[o]);if(e)for(var o of e(s))n.call(s,o)&&r(t,o,s[o]);return t};import{v as o}from"./vue-vendor-4f5e579f.js";const i=t=>{const e={"银行卡":"6222","信用卡":"4367"}[t]||"6222",a=Math.floor(1e8*Math.random()).toString().padStart(8,"0"),n=Math.floor(1e4*Math.random()).toString().padStart(4,"0");return`${e} ${a.slice(0,4)} ${a.slice(4,8)} ${n}`},l=(t=10)=>{const e=["存款","取款","转账支出","转账收入","消费","还款"],a=["成功","处理中","失败"],n=[],r=new Date;for(let s=0;s<t;s++){const t=Math.floor(1e4*Math.random())+100,o=Math.random()>.4,i=new Date(r);i.setDate(r.getDate()-Math.floor(30*Math.random())),n.push({id:Date.now()+s,date:i.toISOString(),description:`${e[Math.floor(Math.random()*e.length)]}${o?"支出":"收入"}`,amount:o?-t:t,balance:Math.floor(1e5*Math.random())+1e3,type:e[Math.floor(Math.random()*e.length)],status:a[Math.floor(Math.random()*a.length)],merchant:`商户${Math.floor(1e3*Math.random())}`})}return n.sort((t,e)=>new Date(e.date)-new Date(t.date))},c=o("account",{state:()=>({userInfo:{name:"",accountCount:0,accounts:[]},currentAccount:null,transactions:[],filteredTransactions:[],searchFilters:{dateRange:[],transactionType:"",amountRange:[],status:""},navigationState:{from:null,to:null,timestamp:null},isLoading:!1,error:null}),actions:{fetchUserInfo(){return t=this,e=null,a=function*(){this.isLoading=!0;try{yield new Promise(t=>setTimeout(t,800));const t=["银行卡","银行卡","信用卡"].map((t,e)=>({id:e+1,name:`${t}${e+1}`,type:t,number:i(t),balance:Math.floor(1e5*Math.random())+5e3,openDate:new Date(Date.now()-30*e*24*60*60*1e3).toISOString(),transactions:l(15-3*e)}));t.sort((t,e)=>t.type!==e.type?t.type.localeCompare(e.type):new Date(e.openDate)-new Date(t.openDate)),this.userInfo={name:"张三",accountCount:t.length,accounts:t},t.length>0&&this.selectAccount(t[0].id)}catch(t){this.error="获取用户信息失败，请稍后重试"}finally{this.isLoading=!1}},new Promise((n,r)=>{var s=t=>{try{i(a.next(t))}catch(e){r(e)}},o=t=>{try{i(a.throw(t))}catch(e){r(e)}},i=t=>t.done?n(t.value):Promise.resolve(t.value).then(s,o);i((a=a.apply(t,e)).next())});var t,e,a},selectAccount(t){const e=this.userInfo.accounts.find(e=>e.id===t);e&&(this.currentAccount=e,this.transactions=[...e.transactions],this.filteredTransactions=[...this.transactions],this.applyFilters())},applyFilters(){let t=[...this.transactions];if(2===this.searchFilters.dateRange.length){const e=new Date(this.searchFilters.dateRange[0]),a=new Date(this.searchFilters.dateRange[1]);a.setHours(23,59,59,999),t=t.filter(t=>{const n=new Date(t.date);return n>=e&&n<=a})}if(this.searchFilters.transactionType&&(t=t.filter(t=>t.type===this.searchFilters.transactionType)),2===this.searchFilters.amountRange.length){const e=this.searchFilters.amountRange[0],a=this.searchFilters.amountRange[1];t=t.filter(t=>Math.abs(t.amount)>=e&&Math.abs(t.amount)<=a)}this.searchFilters.status&&(t=t.filter(t=>t.status===this.searchFilters.status)),this.filteredTransactions=t},updateFilters(t){this.searchFilters=s(s({},this.searchFilters),t),this.applyFilters()},clearFilters(){this.searchFilters={dateRange:[],transactionType:"",amountRange:[],status:""},this.applyFilters()},clearError(){this.error=null},setNavigationState(t){this.navigationState={from:t.from,to:t.to,timestamp:t.timestamp}},clearNavigationState(){this.navigationState={from:null,to:null,timestamp:null}}},getters:{accountTypes(){return[...new Set(this.userInfo.accounts.map(t=>t.type))].map(t=>({type:t,accounts:this.userInfo.accounts.filter(e=>e.type===t)}))},transactionTypes(){return[...new Set(this.transactions.map(t=>t.type))]},statusOptions(){return[...new Set(this.transactions.map(t=>t.status))]}}});export{c as u};
